<!doctype html>
<html lang="lv">
<head>
  <meta charset="UTF-8" />
  <title>Sienas kalendÄrs â€” info panelis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    :root {
      --accent: #437e12;
      --accent-soft: rgba(67, 126, 18, 0.45);
      --text: #f9fafb;
      --text-muted: #cbd5f5;
      --panel: rgba(5, 10, 25, 0.78);
      --panel-soft: rgba(7, 12, 30, 0.9);
      --border-soft: rgba(148, 163, 184, 0.6);
      --shadow: 0 24px 60px rgba(0, 0, 0, 0.8);
      --radius-lg: 22px;
      --radius-md: 16px;
      --blur: 20px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      height: 100%;
      width: 100%;
    }

    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background: #00000040;
      overflow: hidden; /* panelis bez skroÄ¼iem */
    }

    /* ===== FONA SLAIDÅ OVS ===== */
    #bg-slideshow {
      position: fixed;
      inset: 0;
      z-index: -2;
      overflow: hidden;
    }

    #bg-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.8) saturate(1.15);
      transform: scale(1.08);
      transition: opacity 0.9s ease, transform 11s ease-out;
      opacity: 0;
    }

    #bg-photo.visible {
      opacity: 1;
      transform: scale(1.02);
    }

    /* tumÅ¡Ä maska virs fona, lai teksts ir salasÄms */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      background:
        radial-gradient(circle at top, rgba(15, 23, 42, 0.35), transparent 55%),
        linear-gradient(to right, rgb(3 7 18 / 67%) 0%, rgb(3 7 18 / 65%) 40%, rgb(3 7 18 / 57%) 100%);
      pointer-events: none;
    }

    /* ===== GALVENAIS IZZKÄ€RTOJUMS ===== */
    /* !!! Å EIT VARI MAINÄªT KOLONNU PLATUMU (paÅ¡laik ~33% / 67%) */
    .wall {
      position: relative;
      z-index: 1;
      height: 100vh;
      width: 97vw;
      max-width: 1990px;
      margin: 0 auto;
      padding: 1.8rem 0;
      display: grid;
      grid-template-columns: minmax(0, 0.25fr) minmax(0, 0.80fr); /* kreisÄ 33%, labÄ 67% */
      gap: 2rem;
    }

    .left-column {
      display: grid;
      grid-template-rows: auto auto 1fr;
      gap: 1.4rem;
      height: 100%;
      min-height: 0;
    }

    .right-column {
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      height: 100%;
      min-height: 0;
    }

    .card {
      background: rgb(5 10 25 / 17%);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow);
      padding: 1.2rem 1.4rem;
    }

    .card-title {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
      margin-bottom: 0.4rem;
    }

    /* ===== PULKSTENIS + DATUMS ===== */
    .clock-card {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      opacity: 0.8;
      text-align: center;
    }

    .clock-time {
      font-size: clamp(3.2rem, 5.4vw, 4rem);
      letter-spacing: 0.08em;
      font-weight: 600;
    }

    .clock-date {
      font-size: clamp(1rem, 1.7vw, 1.3rem);
      color: var(--text-muted);
    }

    .clock-location {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-top: 0.25rem;
      color: var(--text-muted);
    }

/* ===== LAIKAPSTÄ€KÄ»I ===== */
.weather-card {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  opacity: 0.8;
  overflow: hidden; /* ja nu kaut kas tomÄ“r mÄ“Ä£ina iziet ÄrÄ */
}

/* Layout: kreisajÄ pusÄ“ ikona+temp, pa labi â€“ extra
   Zem tiem abiem â€“ apraksts + meta rinda */
.weather-main {
  display: grid;
  grid-template-columns: 1fr auto;   /* kreisÄ daÄ¼a stiepjas, labajÄ auto platums */
  grid-template-rows: auto auto;
  grid-template-areas:
    "left  extra"
    "right extra";                   /* right zem left, extra pa labi abÄs rindÄs */
  column-gap: 1.2rem;
  row-gap: 0.35rem;
  align-items: flex-start;
}

/* 1. bloks: ikona + lielÄ temperatÅ«ra + Diena/Nakts */
.weather-main-left {
  grid-area: left;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.15rem;
}

.weather-temp-row {
  display: flex;
  align-items: baseline;
  gap: 0.35rem;
}

.weather-icon {
  font-size: 1.8rem;
  line-height: 1;
}

.weather-temp {
  font-size: 2.4rem;
  font-weight: 500;
}

.weather-daynight {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--text-muted);
}

/* LabÄ kolonna: NokriÅ¡Å†i / Mitrums / VÄ“jÅ¡ â€“ tieÅ¡i blakus kreisajai daÄ¼ai */
.weather-extra {
  grid-area: extra;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  text-align: right;
  font-size: 0.8rem;
  color: var(--text-muted);
  gap: 0.15rem;
}

.weather-extra span {
  white-space: normal;   /* Ä¼aujam lauzt rindas, lai neiziet Ärpus kartes */
}

/* Zem kreisÄs kolonnas â€“ apraksts + meta rinda */
.weather-main-right {
  grid-area: right;
  display: flex;
  flex-direction: column;
  gap: 0.12rem;
  font-size: 0.95rem;
}

.weather-desc {
  color: var(--text-muted);
}

.weather-meta {
  font-size: 0.8rem;
  color: var(--text-muted);
}

/* Prognoze paliek kÄ iepriekÅ¡ */
.weather-forecast-row {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 0.4rem;
  margin-top: 0.4rem;
  font-size: 0.8rem;
}


    .forecast-item {
      background: rgba(15, 23, 42, 0.82);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.5rem;
      text-align: center;
    }

    .forecast-day {
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 0.78rem;
    }

    .forecast-icon {
      width: 32px;
      height: 32px;
      margin: 0.1rem auto;
    }

    .forecast-temp {
      font-size: 0.85rem;
      font-weight: 500;
    }

    .forecast-details {
      margin-top: 0.1rem;
      font-size: 0.72rem;
      line-height: 1.25;
      color: var(--text-muted);
    }

    /* ===== VÄ€RDA DIENAS + ZIÅ…AS ===== */
    .bottom-left {
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 0.8rem;
      min-height: 0;
      backdrop-filter: blur(var(--blur));
    }

    .nameday-card {
      padding: 0.9rem 1.1rem;
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 163, 184, 0.45);
      font-size: 0.9rem;
      background: rgb(5 10 25 / 17%);
    }

    .nameday-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
      margin-bottom: 0.2rem;
    }

    .nameday-names {
      font-size: 0.95rem;
      font-weight: 500;
    }

    .news-card {
      padding: 0.9rem 1.1rem;
      border-radius: var(--radius-md);
      background: rgb(5 10 25 / 17%);
      border: 1px solid rgba(148, 163, 184, 0.45);
      font-size: 0.85rem;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 0;
    }

    .news-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.3rem;
    }

    .news-title {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
    }

    .news-updated {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .news-list {
      list-style: none;
      margin-top: 0.4rem;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      overflow: hidden;
    }

    .news-item {
      display: flex;
      flex-direction: column;
      gap: 0.05rem;
      padding: 0.3rem 0;
      border-bottom: 1px solid rgba(30, 64, 175, 0.4);
    }

    .news-item:last-child {
      border-bottom: none;
    }

    .news-title-line {
      font-size: 0.85rem;
      line-height: 1.25;
    }

    .news-title-line a {
      color: #e5e7eb;
      text-decoration: none;
    }

    .news-title-line a:hover {
      text-decoration: underline;
    }

    .news-meta {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    /* ===== KALENDÄ€RS ===== */
    .calendar-frame-wrap {
      flex: 1;
      min-height: 0;
      background: rgb(5 10 25 / 17%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: var(--shadow);
      padding: 0.7rem;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .calendar-col {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 0;
      gap: 0.25rem;
    }

    .calendar-name {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      font-size: 0.78rem;
      margin-bottom: 0.3rem;
    }

.calendar-frame {
  flex: 1 1 auto;
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  border: 0;
  border-radius: 12px;
  background: #000;   /* melns fons aiz kalendÄra */
  /* NEKÄ€DU transform Å¡eit */
}

    @media (max-width: 1100px) {
      .wall {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto;
      }
      .right-column {
        min-height: 50vh;
      }
    }
  </style>
</head>
<body>
  <!-- FONA SLAIDÅ OVS -->
  <div id="bg-slideshow">
    <img id="bg-photo" src="" alt="Fona attÄ“ls" />
  </div>

  <main class="wall">
    <!-- KREISÄ€ KOLONNA -->
    <section class="left-column">
      <!-- Pulkstenis + datums -->
      <section class="card clock-card">
        <div class="clock-time" id="clock-time">00:00</div>
        <div class="clock-date" id="clock-date">Pirmdiena, 1. janvÄris 2025. g.</div>
        <div class="clock-location">RÄ«ga, Latvija</div>
      </section>

      <!-- LaikapstÄkÄ¼i -->
      <section class="card weather-card">
        <div class="card-title">LaikapstÄkÄ¼i</div>
        <div class="weather-main">
          <!-- 1. kolona: ikona + temp + diena/nakts -->
          <div class="weather-main-left">
            <div class="weather-temp-row">
              <span id="weather-icon" class="weather-icon">ğŸŒ¡ï¸</span>
              <span class="weather-temp" id="weather-temp">--Â°C</span>
            </div>
            <div id="weather-daynight" class="weather-daynight">Diena / nakts</div>
          </div>

          <!-- 2. kolona: papildu dati (nokriÅ¡Å†i, mitrums, vÄ“jÅ¡) -->
          <div id="weather-extra" class="weather-extra">
            <span>NokriÅ¡Å†i: -</span>
            <span>Mitrums: -</span>
            <span>VÄ“jÅ¡: -</span>
          </div>

          <!-- 3. kolona: apraksts + meta rinda -->
          <div class="weather-main-right">
            <div id="weather-desc" class="weather-desc">IelÄdÄ“...</div>
            <div id="weather-meta" class="weather-meta">RÄ«ga â€¢ ...</div>
          </div>
        </div>

        <div class="weather-forecast-row" id="weather-forecast"></div>
      </section>

      <!-- VÄrda dienas + ziÅ†as -->
      <section class="bottom-left">
        <div class="nameday-card">
          <div class="nameday-label">Å odien vÄrda dienu svin:</div>
          <div class="nameday-names" id="nameday-names">IelÄdÄ“ vÄrda dienas...</div>
        </div>

        <div class="news-card">
          <div class="news-header">
            <div class="news-title">JaunÄkÄs ziÅ†as â€” LSM</div>
            <div class="news-updated" id="news-updated"></div>
          </div>
          <ul class="news-list" id="news-list">
            <li class="news-item">
              <div class="news-title-line">IelÄdÄ“ ziÅ†as...</div>
            </li>
          </ul>
        </div>
      </section>
    </section>

    <!-- LABÄ€ KOLONNA â€” 1 liels kalendÄrs (iframe) -->
    <section class="right-column">
      <div class="calendar-frame-wrap">
        <div class="calendar-col">
          <div class="calendar-name">TV sienas kalendÄrs</div>

          <!-- Å EIT IELIEC hometvhometv KALENDÄ€RA EMBED LINKU -->
          <iframe
            class="calendar-frame"
            src="https://calendar.google.com/calendar/embed?wkst=1&ctz=Europe%2FRiga&showPrint=0&showTitle=0&showTz=0&bgcolor=%23000000&src=aG9tZXR2aG9tZXR2MTkxM0BnbWFpbC5jb20&src=bHYubGF0dmlhbiNob2xpZGF5QGdyb3VwLnYuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&src=ZDk1ZWUxNTI0NWM0NTVjNTA0NGJjZTM3YWYyM2JiMTk3ZmM2NTZmYWE1ZmYxZGUxZDYxZDg1MWZmOTYzZWI1YUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=NW1sc3Q3bWtza2NlamNwajUxZWZ1c21yYjBAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&src=ZW4ubGF0dmlhbiNob2xpZGF5QGdyb3VwLnYuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&src=cXVobGZkbGJnM2dyMmc5bnBpMHFocDY4NzRAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&src=amFuaXNlZ2xpczZAZ21haWwuY29t&src=YWU3cTd2aTZjaWZtNWtxZnZyMWFscXYxYWNAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&color=%23039be5&color=%234285f4&color=%23f6bf26&color=%23d81b60&color=%230b8043&color=%23a79b8e&color=%23d50000&color=%238e24aa"
            frameborder="0"
            scrolling="no">
          </iframe>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ========================
    // PULKSTENIS + DATUMS
    // ========================
    (function setupClock() {
      const timeEl = document.getElementById("clock-time");
      const dateEl = document.getElementById("clock-date");

      const days = ["SvÄ“tdiena", "Pirmdiena", "Otrdiena", "TreÅ¡diena", "Ceturtdiena", "Piektdiena", "Sestdiena"];
      const months = [
        "janvÄris",
        "februÄris",
        "marts",
        "aprÄ«lis",
        "maijs",
        "jÅ«nijs",
        "jÅ«lijs",
        "augusts",
        "septembris",
        "oktobris",
        "novembris",
        "decembris"
      ];

      function updateClock() {
        const now = new Date();
        const h = String(now.getHours()).padStart(2, "0");
        const m = String(now.getMinutes()).padStart(2, "0");
        timeEl.textContent = `${h}:${m}`;

        const weekday = days[now.getDay()];
        const d = now.getDate();
        const monthName = months[now.getMonth()];
        const y = now.getFullYear();
        dateEl.textContent = `${weekday}, ${d}. ${monthName} ${y}. g.`;
      }

      updateClock();
      setInterval(updateClock, 1000);
    })();

    // ========================
    // LAIKAPSTÄ€KÄ»I â€” Open-Meteo
    // ========================
    (function setupWeather() {
      const LAT = 56.95;
      const LON = 24.11;
      const city = "RÄ«ga";

      const tempEl = document.getElementById("weather-temp");
      const descEl = document.getElementById("weather-desc");
      const metaEl = document.getElementById("weather-meta");
      const forecastWrap = document.getElementById("weather-forecast");
      const iconEl = document.getElementById("weather-icon");
      const dayNightEl = document.getElementById("weather-daynight");
      const extraEl = document.getElementById("weather-extra");

      function mapWeatherCode(code, isDay = true) {
        let icon = isDay ? "ğŸŒ¡ï¸" : "ğŸŒ™";
        let label = "LaikapstÄkÄ¼i";
        let long = "Nav detalizÄ“ta apraksta Å¡im kodam.";

        switch (code) {
          case 0:
            icon = isDay ? "â˜€ï¸" : "ğŸŒ™";
            label = "Skaidrs";
            long = "Skaidras debesis, nokriÅ¡Å†i nav gaidÄmi.";
            break;
          case 1:
            icon = isDay ? "ğŸŒ¤ï¸" : "ğŸŒ™";
            label = "PÄrsvarÄ skaidrs";
            long = "PÄrsvarÄ skaidras debesis ar atseviÅ¡Ä·iem mÄkoÅ†iem.";
            break;
          case 2:
            icon = "ğŸŒ¤ï¸";
            label = "DaÄ¼Ä“ji mÄkoÅ†ains";
            long = "DaÄ¼Ä“ji mÄkoÅ†ainas debesis, saule un mÄkoÅ†i mijas.";
            break;
          case 3:
            icon = "â˜ï¸";
            label = "ApmÄcies";
            long = "PilnÄ«gi apmÄkuÅ¡Äs debesis, saule praktiski nav redzama.";
            break;
          case 45:
          case 48:
            icon = "ğŸŒ«ï¸";
            label = "Migla";
            long = "Migla, redzamÄ«ba ir ievÄ“rojami samazinÄta.";
            break;
          case 51:
          case 53:
          case 55:
            icon = "ğŸŒ¦ï¸";
            label = "SmidzinoÅ¡s lietus";
            long = "SmidzinoÅ¡s lietus ar daÅ¾Ädu intensitÄti.";
            break;
          case 56:
          case 57:
          case 66:
          case 67:
            icon = "ğŸŒ§ï¸";
            label = "SasalstoÅ¡s lietus";
            long = "SasalstoÅ¡s lietus, iespÄ“jama apledoÅ¡ana.";
            break;
          case 61:
          case 63:
          case 65:
            icon = "ğŸŒ§ï¸";
            label = "Lietus";
            long = "IlgstoÅ¡s lietus ar daÅ¾Ädu intensitÄti.";
            break;
          case 71:
          case 73:
          case 75:
          case 77:
            icon = "â„ï¸";
            label = "Sniegs";
            long = "SnigÅ¡ana ar daÅ¾Ädu intensitÄti.";
            break;
          case 80:
          case 81:
          case 82:
            icon = "ğŸŒ§ï¸";
            label = "LietusgÄzes";
            long = "ÄªslaicÄ«gas lietusgÄzes.";
            break;
          case 85:
          case 86:
            icon = "â„ï¸";
            label = "Sniega brÄzmas";
            long = "ÄªslaicÄ«gas sniega brÄzmas.";
            break;
          case 95:
          case 96:
          case 99:
            icon = "â›ˆï¸";
            label = "PÄ“rkona negaiss";
            long = "PÄ“rkona negaiss, iespÄ“jami arÄ« nokriÅ¡Å†i un krusa.";
            break;
        }

        return { label, long, icon };
      }

      async function loadWeather() {
        try {
          const url =
            `https://api.open-meteo.com/v1/forecast` +
            `?latitude=${LAT}&longitude=${LON}` +
            `&current_weather=true` +
            `&hourly=relativehumidity_2m,precipitation_probability,wind_speed_10m` +
            `&daily=weathercode,temperature_2m_max,temperature_2m_min` +
            `&timezone=Europe%2FRiga`;

          const res = await fetch(url);
          if (!res.ok) throw new Error("TÄ«kla kÄ¼Å«da");
          const data = await res.json();

          const current = data.current_weather;
          const daily = data.daily;
          const hourly = data.hourly || {};

          if (!current) {
            tempEl.textContent = "--Â°C";
            descEl.textContent = "Nav datu par paÅ¡reizÄ“jiem laikapstÄkÄ¼iem.";
            metaEl.textContent = city;
            forecastWrap.textContent = "";
            return;
          }

          const t = Math.round(current.temperature);
          const info = mapWeatherCode(current.weathercode, current.is_day === 1);

          // 1. kolona
          tempEl.textContent = `${t}Â°C`;
          if (iconEl) iconEl.textContent = info.icon;

          const isDay = current.is_day === 1;
          if (dayNightEl) {
            dayNightEl.textContent = `${isDay ? "Diena" : "Nakts"} â€¢ ${info.label}`;
          }

          // 3. kolona apraksts
          descEl.textContent = info.long;

          const now = new Date();
          const hh = String(now.getHours()).padStart(2, "0");
          const mm = String(now.getMinutes()).padStart(2, "0");

          // ---------- papildu dati no hourly ----------
          let humidity = null;
          let precipProb = null;
          let windSpeed = typeof current.windspeed === "number" ? current.windspeed : null;

          const times = Array.isArray(hourly.time) ? hourly.time : [];
          if (times.length && current.time) {
            let idx = times.indexOf(current.time);
            if (idx === -1) idx = 0;

            if (Array.isArray(hourly.relativehumidity_2m)) {
              humidity = hourly.relativehumidity_2m[idx];
            }
            if (Array.isArray(hourly.precipitation_probability)) {
              precipProb = hourly.precipitation_probability[idx];
            }
            if (Array.isArray(hourly.wind_speed_10m)) {
              windSpeed = hourly.wind_speed_10m[idx];
            }
          }

          // 2. kolona â€“ rakstÄm stabiÅ†Ä
          if (extraEl) {
            const lines = [];
            if (precipProb != null) lines.push(`NokriÅ¡Å†i: ${Math.round(precipProb)}%`);
            if (humidity != null) lines.push(`Mitrums: ${Math.round(humidity)}%`);
            if (windSpeed != null) lines.push(`VÄ“jÅ¡: ${Math.round(windSpeed)} km/h`);
            extraEl.innerHTML = lines.length
              ? lines.map((txt) => `<span>${txt}</span>`).join("")
              : "<span>Papildu dati nav pieejami.</span>";
          }

          // Å¡odienas max/min
          let todayIndex = 0;
          let tMaxToday = null;
          let tMinToday = null;

          if (daily && Array.isArray(daily.time) && daily.time.length) {
            const currentDateStr = current.time ? current.time.slice(0, 10) : null;
            if (currentDateStr) {
              const foundIndex = daily.time.findIndex((d) => d === currentDateStr);
              if (foundIndex !== -1) todayIndex = foundIndex;
            }

            if (
              Array.isArray(daily.temperature_2m_max) &&
              typeof daily.temperature_2m_max[todayIndex] === "number"
            )
              tMaxToday = Math.round(daily.temperature_2m_max[todayIndex]);

            if (
              Array.isArray(daily.temperature_2m_min) &&
              typeof daily.temperature_2m_min[todayIndex] === "number"
            )
              tMinToday = Math.round(daily.temperature_2m_min[todayIndex]);
          }

          let progText = "";
          if (tMaxToday !== null && tMinToday !== null) {
            progText = ` â€¢ Å odien prognoze: D: ${tMaxToday}Â° / N: ${tMinToday}Â°`;
          }

          // 3. kolonas apakÅ¡Ä“jÄ rinda â€“ tikai pilsÄ“ta + atjaunoÅ¡ana + prognoze
          metaEl.textContent = `${city} â€¢ AtjauninÄts ${hh}:${mm}${progText}`;

          // ---------- prognoze nÄkamajÄm 4 dienÄm ----------
          if (!daily || !daily.time || !daily.time.length) {
            forecastWrap.textContent = "Nav prognozes datu.";
            return;
          }

          const weekdayShort = ["Sv", "Pr", "Ot", "Tr", "Ce", "Pk", "Se"];
          forecastWrap.innerHTML = "";

          const startIdx = Math.min(todayIndex + 1, daily.time.length - 1);
          const endIdx = Math.min(startIdx + 4, daily.time.length);

          for (let i = startIdx; i < endIdx; i++) {
            const dateStr = daily.time[i];
            const dt = new Date(dateStr + "T12:00:00");
            const dayName = weekdayShort[dt.getDay()];
            const tMax = Math.round(daily.temperature_2m_max[i]);
            const tMin = Math.round(daily.temperature_2m_min[i]);
            const code = daily.weathercode[i];
            const infoDay = mapWeatherCode(code, true);

            const isTomorrow = i === startIdx;
            const dayLabel = isTomorrow ? "RÄ«t" : dayName;

            const div = document.createElement("div");
            div.className = "forecast-item";
            div.innerHTML = `
              <div class="forecast-day">${dayLabel}</div>
              <div class="forecast-icon">${infoDay.icon}</div>
              <div class="forecast-temp">D: ${tMax}Â° / N: ${tMin}Â°</div>
              <div class="forecast-details">${infoDay.long}</div>
            `;
            forecastWrap.appendChild(div);
          }
        } catch (e) {
          console.error(e);
          descEl.textContent = "NeizdevÄs ielÄdÄ“t laikapstÄkÄ¼us.";
          metaEl.textContent = "PÄrbaudi internetu";
          if (extraEl) extraEl.innerHTML = "<span>Papildu dati nav pieejami.</span>";
          forecastWrap.textContent = "";
        }
      }

      loadWeather();
      setInterval(loadWeather, 15 * 60 * 1000);
    })();

    // ========================
    // VÄ€RDA DIENAS
    // ========================
    (function setupNamedays() {
      const targetEl = document.getElementById("nameday-names");
      const DATA_URL =
        "https://gist.githubusercontent.com/skakri/5225055/raw/8ee27d7f441b9ece8301182bcbb1c1985b01f65a/vardadienas.json";

      async function loadNamedays() {
        try {
          const res = await fetch(DATA_URL);
          if (!res.ok) throw new Error("TÄ«kla kÄ¼Å«da");
          const data = await res.json();

          const now = new Date();
          const monthIndex = now.getMonth();
          const dayIndex = now.getDate() - 1;

          const monthData = data[monthIndex] || {};
          const names = monthData[String(dayIndex)] || [];
          if (!names.length) {
            targetEl.textContent = "Nav datu par vÄrda dienÄm.";
            return;
          }
          targetEl.textContent = names.join(", ");
        } catch (e) {
          console.error(e);
          targetEl.textContent = "NeizdevÄs ielÄdÄ“t vÄrda dienu sarakstu.";
        }
      }

      loadNamedays();
      setInterval(loadNamedays, 24 * 60 * 60 * 1000);
    })();

    // ========================
    // JAUNÄ€KÄ€S ZIÅ…AS â€” LSM (AllOrigins)
    // ========================
    (function setupNews() {
      const RSS_URL = "https://www.lsm.lv/rss/?lang=lv&catid=14";
      const listEl = document.getElementById("news-list");
      const updatedEl = document.getElementById("news-updated");

      async function loadNews() {
        try {
          const proxyUrl =
            "https://api.allorigins.win/raw?url=" + encodeURIComponent(RSS_URL);

          const res = await fetch(proxyUrl);
          if (!res.ok) throw new Error("TÄ«kla kÄ¼Å«da (RSS proxy)");
          const text = await res.text();

          const parser = new DOMParser();
          const xml = parser.parseFromString(text, "application/xml");
          const items = Array.from(xml.querySelectorAll("item")).slice(0, 6);

          listEl.innerHTML = "";

          if (!items.length) {
            listEl.innerHTML =
              '<li class="news-item"><div class="news-title-line">Nav ziÅ†u.</div></li>';
            updatedEl.textContent = "";
            return;
          }

          const now = new Date();
          const hh = String(now.getHours()).padStart(2, "0");
          const mm = String(now.getMinutes()).padStart(2, "0");
          updatedEl.textContent = `Atjaunots ${hh}:${mm}`;

          items.forEach((item) => {
            const title = item.querySelector("title")?.textContent || "(bez nosaukuma)";
            const link = item.querySelector("link")?.textContent || "#";
            const pubDate = item.querySelector("pubDate")?.textContent || "";
            let timeStr = "";
            if (pubDate) {
              const d = new Date(pubDate);
              if (!isNaN(d.getTime())) {
                const h = String(d.getHours()).padStart(2, "0");
                const m = String(d.getMinutes()).padStart(2, "0");
                timeStr = `${h}:${m}`;
              }
            }

            const li = document.createElement("li");
            li.className = "news-item";
            li.innerHTML = `
              <div class="news-title-line"><a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a></div>
              ${
                timeStr
                  ? `<div class="news-meta">${timeStr}</div>`
                  : '<div class="news-meta">&nbsp;</div>'
              }
            `;
            listEl.appendChild(li);
          });
        } catch (e) {
          console.error(e);
          listEl.innerHTML =
            '<li class="news-item"><div class="news-title-line">NeizdevÄs ielÄdÄ“t LSM RSS (CORS/proxy problÄ“ma).</div></li>';
          updatedEl.textContent = "";
        }
      }

      loadNews();
      setInterval(loadNews, 10 * 60 * 1000);
    })();

    // ========================
    // FONA ATTÄ’LI
    // ========================
    (function setupBackground() {
      const imgEl = document.getElementById("bg-photo");
      if (!imgEl) return;

      const urls = [
        "https://images.pexels.com/photos/1303081/pexels-photo-1303081.jpeg",
        "https://images.pexels.com/photos/639110/pexels-photo-639110.jpeg",
        "https://images.pexels.com/photos/1656564/pexels-photo-1656564.jpeg",
        "https://images.pexels.com/photos/1028723/pexels-photo-1028723.jpeg",
        "https://images.pexels.com/photos/1708601/pexels-photo-1708601.jpeg",
        "https://images.pexels.com/photos/1556679/pexels-photo-1556679.jpeg",
        "https://images.pexels.com/photos/735423/pexels-photo-735423.jpeg"
      ];

      let index = 0;

      function showBackground(i) {
        const src = urls[i % urls.length];
        imgEl.classList.remove("visible");
        setTimeout(() => {
          imgEl.src = src;
          imgEl.onload = () => imgEl.classList.add("visible");
        }, 80);
      }

      showBackground(index);
      setInterval(() => {
        index = (index + 1) % urls.length;
        showBackground(index);
      }, 60000);
    })();
  </script>
</body>
</html>
